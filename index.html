<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>åŒ–å­¦ååº”ç±»å‹å¤§å¸ˆèµ›</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f0f8ff;
        }
        .container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            position: relative; /* æ·»åŠ ç›¸å¯¹å®šä½ */
        }
        .reaction {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 25px 0;
            padding: 20px 40px;
            background: #f8f9fa;
            border-radius: 10px;
            position: relative;
        }
        .equation {
            display: flex;
            align-items: center;
            font-size: 1.4em;
        }
        .condition {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            color: #e74c3c; /* ä¸å¾—åˆ†æ–‡å­—é¢œè‰²ä¸€è‡´ */
            font-size: 0.5em;
            font-weight: bold;
            white-space: nowrap;
        }
        .trangle{
            top: 5px;
        }
        .equal {
            font-size: 1.4em;
            margin: 0 10px;
            font-family: 'Cambria Math', Symbola;
            position: relative;
            opacity: 1; /* è®¾ç½®é€æ˜åº¦ä¸º 1ï¼Œä½¿ç­‰å·é¢œè‰²åŠ æ·±ä¸ºé»‘è‰² */
            color: #000; 
        }
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        button {
            padding: 15px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
        }
        .option-btn {
            background: #3498db;
            color: white;
        }
        .option-btn:hover:not(:disabled) {
            background: #2980b9;
        }
        .control-btn {
            background: #2ecc71;
            color: white;
            width: 200px;
            margin: 10px auto;
        }
        .score {
            font-size: 1.6em;
            color: #e74c3c;
            margin: 20px 0;
            text-align: center;
        }
        .feedback {
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        .correct {
            background: #d4edda;
            color: #155724;
        }
        .wrong {
            background: #f8d7da;
            color: #721c24;
        }
        .result {
            font-size: 2em;
            text-align: center;
            margin: 25px 0;
        }
        :disabled {
            background: #bdc3c7 !important;
            cursor: not-allowed;
        }
        .celebration {
            font-size: 2em;
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .question-number {
            position: absolute;
            left: 15px;
            background: #3498db;
            color: white;
            width: 40px; /* ç¡®ä¿å®½åº¦å’Œé«˜åº¦ç›¸ç­‰ */
            height: 40px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.2em;
            display: flex; /* ä½¿ç”¨flexå¸ƒå±€å±…ä¸­æ•°å­— */
            align-items: center;
            justify-content: center;
        }
        #timer {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.2em;
            color: #e74c3c;
        }
	.textColor {
	    color: rgb(231, 76, 60);
	}
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align: center;">ğŸ”¥ åŒ–å­¦ååº”ç±»å‹å¤§å¸ˆèµ› ğŸ”¥</h1>
        <div id="rules">
            <h3>ğŸ“– æ¸¸æˆè§„åˆ™ï¼š</h3>
            <p>ğŸ¯ æœ¬æ¸¸æˆä¼šéšæœºæŠ½å–10ä¸ªåŒ–å­¦ååº”</p>
            <p>ğŸ”¢ ä»äº”ä¸ªé€‰é¡¹ä¸­é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ</p>
            <p>ğŸ† è®¡åˆ†è§„åˆ™ï¼šæ»¡åˆ†100åˆ†ï¼Œç­”å¯¹ä¸€é¢˜å¾—10åˆ†</p>
            <button class="control-btn" onclick="startGame();">å¼€å§‹æŒ‘æˆ˜ï¼</button>
        </div>
        <div id="game" style="display: none;">
            <div id="timer">0:00</div>
            <div class="score">å¾—åˆ†ï¼š<span id="currentScore">0</span>/100</div>
            <div class="reaction" id="reaction"></div>
            <div class="options" id="options"></div>
            <div id="feedback"></div>
            <button class="control-btn" id="nextBtn" style="display: none;" onclick="nextQuestion()">ä¸‹ä¸€é¢˜ â†’</button>
        </div>
        <div id="result" style="display: none;"></div>
    </div>

    <!-- æ·»åŠ éŸ³é¢‘å…ƒç´  -->
    <!-- <audio id="clickSound" src="click.mp3"></audio>
    <audio id="winSound" src="win.mp3"></audio>
    <audio id="tryAgainSound" src="try_again.mp3"></audio> -->

    <script>
        const isWindows = function OSnow(){
            const agent = navigator.userAgent.toLowerCase();
            if (agent.indexOf("win32") >= 0 || agent.indexOf("wow32") >= 0) {
                return true;
            }
            if (agent.indexOf("win64") >= 0 || agent.indexOf("wow64") >= 0) {
                return true;
            }
        }();

        // é¢˜åº“æ•°æ®å’Œååº”ç±»å‹å®šä¹‰
        const questions = [
            { reaction: "2Hâ‚‚ + Oâ‚‚ â†’ 2Hâ‚‚O", condition: "ç‚¹ç‡ƒ", type: "åŒ–åˆååº”" },
            { reaction: "CaO + Hâ‚‚O â†’ Ca(OH)â‚‚", condition: "", type: "åŒ–åˆååº”" },
            { reaction: "2Hâ‚‚Oâ‚‚ â†’ 2Hâ‚‚O + Oâ‚‚â†‘", condition: "MnOâ‚‚", type: "åˆ†è§£ååº”" },
            { reaction: "2KMnOâ‚„ â†’ Kâ‚‚MnOâ‚„ + MnOâ‚‚ + Oâ‚‚â†‘", condition: "â–³", type: "åˆ†è§£ååº”" },
            { reaction: "Zn + Hâ‚‚SOâ‚„ â†’ ZnSOâ‚„ + Hâ‚‚â†‘", condition: "", type: "ç½®æ¢ååº”" },
            { reaction: "Fe + CuSOâ‚„ â†’ FeSOâ‚„ + Cu", condition: "", type: "ç½®æ¢ååº”" },
            { reaction: "HCl + NaOH â†’ NaCl + Hâ‚‚O", condition: "", type: "å¤åˆ†è§£ååº”" },
            { reaction: "AgNOâ‚ƒ + NaCl â†’ AgClâ†“ + NaNOâ‚ƒ", condition: "", type: "å¤åˆ†è§£ååº”" },
            { reaction: "CO + CuO â†’ Cu + COâ‚‚", condition: "â–³", type: "ä¸å±äºåŸºæœ¬ååº”ç±»å‹" },
            { reaction: "CHâ‚„ + 2Oâ‚‚ â†’ COâ‚‚ + 2Hâ‚‚O", condition: "ç‚¹ç‡ƒ", type: "ä¸å±äºåŸºæœ¬ååº”ç±»å‹" },
            { reaction: "S + Oâ‚‚ â†’ SOâ‚‚", condition: "ç‚¹ç‡ƒ", type: "åŒ–åˆååº”" },
            { reaction: "2HgO â†’ 2Hg + Oâ‚‚â†‘", condition: "â–³", type: "åˆ†è§£ååº”" },
            { reaction: "C + 2CuO â†’ 2Cu + COâ‚‚â†‘", condition: "é«˜æ¸©", type: "ç½®æ¢ååº”" },
            { reaction: "Naâ‚‚COâ‚ƒ + Ca(OH)â‚‚ â†’ 2NaOH + CaCOâ‚ƒâ†“", condition: "", type: "å¤åˆ†è§£ååº”" },
            { reaction: "3CO + Feâ‚‚Oâ‚ƒ â†’ 2Fe + 3COâ‚‚", condition: "é«˜æ¸©", type: "ä¸å±äºåŸºæœ¬ååº”ç±»å‹" }
        ];

        const typeDefinitions = {
            "åŒ–åˆååº”": "ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šç‰©è´¨ç”Ÿæˆä¸€ç§æ–°ç‰©è´¨çš„ååº”ï¼ˆA + B â†’ Cï¼‰",
            "åˆ†è§£ååº”": "ä¸€ç§ç‰©è´¨åˆ†è§£æˆä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šæ–°ç‰©è´¨çš„ååº”ï¼ˆC â†’ A + Bï¼‰",
            "ç½®æ¢ååº”": "å•è´¨ä¸åŒ–åˆç‰©ååº”ç”Ÿæˆæ–°å•è´¨å’Œæ–°åŒ–åˆç‰©çš„ååº”ï¼ˆA + BC â†’ AC + Bï¼‰", 
            "å¤åˆ†è§£ååº”": "ä¸¤ç§åŒ–åˆç‰©äº’ç›¸äº¤æ¢æˆåˆ†ç”Ÿæˆä¸¤ç§æ–°åŒ–åˆç‰©çš„ååº”ï¼ˆAB + CD â†’ AD + CBï¼‰",
            "ä¸å±äºåŸºæœ¬ååº”ç±»å‹": "ä¸ç¬¦åˆä¸Šè¿°å››ç§åŸºæœ¬ç±»å‹çš„ç‰¹æ®Šååº”ï¼ˆå¦‚æ°§åŒ–è¿˜åŸååº”ï¼‰"
        };

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let startTime;
        let timerInterval;

        function startGame() {
            document.getElementById("rules").style.display = "none";
            document.getElementById("game").style.display = "block";
            document.getElementById("result").style.display = "none";
            currentQuestions = getRandomQuestions();
            currentQuestionIndex = 0;
            score = 0;
            updateScore();
            showQuestion();
            startTime = new Date().getTime();
            timerInterval = setInterval(updateTimer, 1000);
        }

        function getRandomQuestions() {
            return [...questions].sort(() => Math.random() - 0.5).slice(0, 10);
        }

        function renderReaction(question) {
            const [left, right] = question.reaction.split("â†’");
            const classTrangle = isWindows && question.condition === 'â–³' ? 'trangle' : '';
            return `
                <div class="equation">
                    <span>${left.trim()}</span>
                    <span class="equal">
                        ${question.condition ? `<div class="condition ${classTrangle}">${question.condition}</div>` : ''}
                        â•â•
                    </span>
                    <span>${right.trim()}</span>
                </div>
            `;
        }

        function showQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            const reactionDiv = document.getElementById("reaction");
            
            // æ¸…ç©ºå¹¶æ·»åŠ é¢˜å·å’Œååº”å¼
            reactionDiv.innerHTML = `
                <div class="question-number">${currentQuestionIndex + 1}</div>
                ${renderReaction(question)}
            `;
            
            const optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = Object.keys(typeDefinitions)
                .map((type, index) => `
                    <button class="option-btn" onclick="checkAnswer('${type}')">
                        ${index + 1}. ${type}
                    </button>
                `).join("");
            
            document.getElementById("nextBtn").style.display = "none";
            document.getElementById("feedback").innerHTML = "";
        }

        function checkAnswer(selectedType) {
            const correctType = currentQuestions[currentQuestionIndex].type;
            const options = document.querySelectorAll(".option-btn");
            options.forEach(btn => btn.disabled = true);
            
            const feedbackDiv = document.getElementById("feedback");
            if (selectedType === correctType) {
                score += 10;
                feedbackDiv.innerHTML = `<div class="feedback correct">âœ… å›ç­”æ­£ç¡®ï¼</div>`;
            } else {
                feedbackDiv.innerHTML = `
                    <div class="feedback wrong">
                        âŒ æ­£ç¡®ç­”æ¡ˆï¼š${correctType}<br>
                        ${typeDefinitions[correctType]}
                    </div>
                `;
            }
            
            updateScore();
            document.getElementById("nextBtn").style.display = "block";
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < 10) {
                showQuestion();
            } else {
                showResult();
            }
        }

        function updateScore() {
            document.getElementById("currentScore").textContent = score;
        }

        function updateTimer() {
            const currentTime = new Date().getTime();
            const elapsedTime = currentTime - startTime;
            const minutes = Math.floor(elapsedTime / 60000);
            const seconds = Math.floor((elapsedTime % 60000) / 1000);
            const formattedTime = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById("timer").textContent = formattedTime;
        }

        function showResult() {
            clearInterval(timerInterval);
            const currentTime = new Date().getTime();
            const elapsedTime = currentTime - startTime;
            const minutes = Math.floor(elapsedTime / 60000);
            const seconds = Math.floor((elapsedTime % 60000) / 1000);
            const formattedTime = `${minutes}:${seconds.toString().padStart(2, '0')}`;

            document.getElementById("game").style.display = "none";
            const resultDiv = document.getElementById("result");
            resultDiv.style.display = "block";
            
            let emoji = "ğŸ˜­ å†æ¥å†å‰ï¼";
            let message = "ç»§ç»­åŠªåŠ›ï¼";
            let src = 'https://img.tukuppt.com/newpreview_music/08/99/22/5c88ef984e3ca87363.mp3'
            if (score >= 60 && score < 100) {
                emoji = "ğŸ˜Š è¡¨ç°ä¸é”™ï¼";
                message = "æ¥è¿‘å®Œç¾äº†ï¼";
            }
            if (score === 100) {
                emoji = "ğŸ‰ğŸ˜„ å®Œç¾èƒœåˆ©ï¼";
                message = "å…¨éƒ¨ç­”å¯¹ï¼";
                src = 'https://img.tukuppt.com/newpreview_music/01/66/57/63c0ead33306f167.mp3'
            }
            
            resultDiv.innerHTML = `
                <div class="result">
                    <h2>æŒ‘æˆ˜ç»“æŸï¼</h2>
                    <div class="celebration">${emoji}</div>
                    <p  class="textColor">${message} æœ€ç»ˆå¾—åˆ†ï¼š${score}/100</p>
                    <p class="textColor">æ€»ç”¨æ—¶ï¼š${formattedTime}</p>
                    ${score === 100 ? "" : `<button class="control-btn" onclick="startGame()">é‡æ–°æŒ‘æˆ˜</button>`}
                </div>
                <div>
                    <h3>ååº”ç±»å‹å®šä¹‰ï¼š</h3>
                    ${Object.entries(typeDefinitions).map(([type, def]) => `
                        <p><strong>${type}ï¼š</strong>${def}</p>
                    `).join("")}
                </div>
                <audio src="${src}" autoplay="autoplay" />
            `;
        }
    </script>
</body>
</html>